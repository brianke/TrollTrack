<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TrollTrack.MVVM.Views.DashboardView"
             xmlns:vm="clr-namespace:TrollTrack.MVVM.ViewModels"
             x:DataType="vm:DashboardViewModel"
             Title="{Binding Title}">

    <ScrollView>
        <Grid Padding="15">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Current Location -->
            <Border BackgroundColor="LightBlue" 
                    Stroke="DodgerBlue"
                    StrokeThickness="2"
                    StrokeShape="RoundRectangle 12"
                    Margin="0,0,0,15"
                    Padding="15"
                    Grid.Row="0">   
                <StackLayout>
                    <Label Text="📍 Current Location" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           HorizontalOptions="Center" />

                    <Grid Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width=".15*" />
                            <ColumnDefinition Width=".25*" />
                            <ColumnDefinition Width=".15*" />
                            <ColumnDefinition Width=".1*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!-- Latitude -->
                        <Label Text="Latitude:" 
                               FontAttributes="Bold" 
                               VerticalOptions="Center"
                               Grid.Row="0" Grid.Column="0" />
                        <Label Text="{Binding FormattedLatitude}" 
                               FontFamily="Courier" 
                               FontSize="16"
                               Margin="10,0,0,0"
                               Grid.Row="0" Grid.Column="1" />
                        <!-- Decimal degrees (smaller text) -->
                        <Label Text="{Binding CurrentLatitude, StringFormat='{0:F6}'}" 
                               VerticalTextAlignment="Center"
                               FontSize="13" 
                               TextColor="Gray"
                               Margin="10,0,0,0"
                               Grid.Row="0" Grid.Column="2" />

                        <!-- Longitude -->
                        <Label Text="Longitude:" 
                               FontAttributes="Bold" 
                               VerticalOptions="Center" 
                               Grid.Row="1" Grid.Column="0" />
                        <Label Text="{Binding FormattedLongitude}" 
                               FontFamily="Courier" 
                               FontSize="16"
                               Margin="10,0,0,0"
                               Grid.Row="1" Grid.Column="1" />
                        <!-- Decimal degrees (smaller text) -->
                        <Label Text="{Binding CurrentLongitude, StringFormat='{0:F6}'}" 
                               VerticalTextAlignment="Center"
                               FontSize="13" 
                               TextColor="Gray"
                               Margin="10,0,0,0" 
                               Grid.Row="1" Grid.Column="2" />
                        
                        <!-- Refresh Location -->

                        <Image Source="refresh.png"
                               IsVisible="{Binding IsNotBusy}"
                               HeightRequest="25" 
                               Grid.Row="0" Grid.RowSpan="2" Grid.Column="3">
                            <Image.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding UpdateLocationCommand}" />
                            </Image.GestureRecognizers>
                        </Image>

                        <ActivityIndicator IsRunning="{Binding IsBusy}"
                                           IsVisible="{Binding IsBusy}"
                                           Color="Blue"
                                           HeightRequest="25" 
                                           Grid.Row="0" Grid.RowSpan="2" Grid.Column="3" />
                    </Grid>

                    <Label Text="{Binding LocationStatus}" 
                           FontSize="12" 
                           TextColor="DarkBlue"
                           HorizontalOptions="Center"
                           Margin="0,5,0,0" />
                </StackLayout>
            </Border>

            <!-- Weather Information
            <Border BackgroundColor="LightBlue" 
                    Stroke="DodgerBlue"
                    StrokeThickness="2"
                    StrokeShape="RoundRectangle 12"
                    Margin="0,0,0,15"
                    Padding="15"
                    Grid.Row="1">
                <StackLayout>
                    <Label Text="🌤️ Weather Conditions" FontSize="18" FontAttributes="Bold" />
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <StackLayout Grid.Column="0">
                            <Label Text="{Binding WeatherData.Temperature, StringFormat='🌡️ {0:F0}°F'}" />
                            <Label Text="{Binding WeatherData.WindSpeed, StringFormat='💨 {0:F0} mph'}" />
                            <Label Text="{Binding WeatherData.WindDirection, StringFormat='🧭 {0}'}" />
                            <Label Text="{Binding WeatherData.Pressure, StringFormat='📊 {0:F0} mb'}" />
                        </StackLayout>

                        <StackLayout Grid.Column="1">
                            <Label Text="{Binding WeatherData.Conditions, StringFormat='☁️ {0}'}" />
                            <Label Text="{Binding WeatherData.Sunrise, StringFormat='🌅 {0:HH:mm}'}" />
                            <Label Text="{Binding WeatherData.Sunset, StringFormat='🌇 {0:HH:mm}'}" />
                            <Label Text="{Binding WeatherData.Humidity, StringFormat='💧 {0}%'}" />
                        </StackLayout>
                    </Grid>

                    <Button Text="🔄 Refresh Weather" 
                            Command="{Binding RefreshWeatherCommand}"
                            IsEnabled="{Binding IsNotBusy}"
                            BackgroundColor="ForestGreen"
                            TextColor="White"
                            Margin="0,10,0,0" />
                </StackLayout>
            </Border>
 -->
            <!-- Quick Stats 
            <Frame Grid.Row="2" BackgroundColor="LightYellow" Margin="0,0,0,10">
                <StackLayout>
                    <Label Text="📈 Today's Summary" FontSize="18" FontAttributes="Bold" />
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <StackLayout Grid.Column="0">
                            <Label Text="{Binding TodaysCatches, StringFormat='🎣 Catches: {0}'}" />
                            <Label Text="{Binding TotalFishingTime, StringFormat='⏱️ Time: {0}'}" />
                        </StackLayout>

                        <StackLayout Grid.Column="1">
                            <Label Text="{Binding BestCatch, StringFormat='🏆 Best: {0}'}" />
                            <Label Text="{Binding CurrentTrollingMethod, StringFormat='⚙️ Method: {0}'}" />
                        </StackLayout>
                    </Grid>
                </StackLayout>
            </Frame>
-->
            <!-- AI Recommendations 
            <Frame Grid.Row="3" BackgroundColor="LightCoral" Margin="0,0,0,10">
                <StackLayout>
                    <Label Text="🤖 AI Recommendations" FontSize="18" FontAttributes="Bold" />
                    <CollectionView ItemsSource="{Binding AIRecommendations}"
                                    MaximumHeightRequest="150">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <StackLayout Padding="5">
                                    <Label Text="{Binding}" 
                                           FontSize="14"
                                           TextColor="DarkRed" />
                                </StackLayout>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                    <Button Text="🔄 Refresh Recommendations" 
                            Command="{Binding RefreshRecommendationsCommand}"
                            BackgroundColor="Crimson"
                            TextColor="White"
                            Margin="0,10,0,0" />
                </StackLayout>
            </Frame>
-->
            <!-- Quick Actions 
            <Frame Grid.Row="4" BackgroundColor="LightGray">
                <StackLayout>
                    <Label Text="⚡ Quick Actions" FontSize="18" FontAttributes="Bold" />
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Button Grid.Row="0" Grid.Column="0" 
                                Text="🎣 Log Catch" 
                                Command="{Binding LogCatchCommand}" 
                                BackgroundColor="Orange"
                                TextColor="White"
                                Margin="5" />

                        <Button Grid.Row="0" Grid.Column="1" 
                                Text="⚙️ Change Method" 
                                Command="{Binding ChangeTrollingMethodCommand}" 
                                BackgroundColor="Purple"
                                TextColor="White"
                                Margin="5" />

                        <Button Grid.Row="1" Grid.Column="0" 
                                Text="🎯 Manage Lures" 
                                Command="{Binding ManageLuresCommand}" 
                                BackgroundColor="DarkGreen"
                                TextColor="White"
                                Margin="5" />

                        <Button Grid.Row="1" Grid.Column="1" 
                                Text="📊 View History" 
                                Command="{Binding ViewCatchHistoryCommand}" 
                                BackgroundColor="Navy"
                                TextColor="White"
                                Margin="5" />
                    </Grid>

                    <Label Text="{Binding FormattedLastUpdated}" 
                           FontSize="10" 
                           TextColor="Gray"
                           HorizontalOptions="Center"
                           Margin="0,10,0,0" />
                </StackLayout>
            </Frame>
-->  
        </Grid>
    </ScrollView>
</ContentPage>